<!DOCTYPE html><html lang="en"><head><meta name="x-poe-datastore-behavior" content="local_only"><meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com; frame-src 'self' https://www.youtube.com https://trytako.com; child-src 'self'; manifest-src 'self'; worker-src 'self'; upgrade-insecure-requests; block-all-mixed-content;">
<<<<<<< HEAD
<link rel="manifest" href="manifest.json">
=======
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#5D5CDE">
    <link rel="apple-touch-icon" href="/icon-192.png">
>>>>>>> b97c122 (feat: Convert HTML app to PWA and prepare for Android APK generation)
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAIDMASTER - Professional RAID Management System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .batch-select-mode .raid-card {
            transform: translateX(40px);
        }
        .batch-select-mode .batch-checkbox {
            opacity: 1;
            pointer-events: all;
        }
        .batch-checkbox {
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s;
        }
        .raid-card {
            transition: transform 0.2s ease-in-out;
        }
        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
    </style>
    <script src="/sw-register.js"></script>
<script src="https://puc.poecdn.net/authenticated_preview_page/syncedState.bd4eeeb8e8e02052ee92.js"></script></head>
<body class="bg-gray-50 dark:bg-gray-900 min-h-screen">
    <div id="app" class="flex flex-col h-screen">
        <!-- Header -->
        <header class="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-3">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 bg-primary rounded flex items-center justify-center">
                        <span class="text-white font-bold text-sm">R</span>
                    </div>
                    <h1 class="text-xl font-bold text-gray-900 dark:text-white">RAIDMASTER</h1>
                </div>
                <div class="flex items-center space-x-3">
                    <div class="text-right">
                        <div class="text-xs text-gray-500 dark:text-gray-400">Total Items</div>
                        <div class="text-lg font-bold text-gray-900 dark:text-white" id="totalItemsCount">4</div>
                    </div>
                    <button id="menuBtn" class="p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors">
                        <span class="text-lg">‚ãÆ</span>
                    </button>
                </div>
            </div>
        </header>

        <!-- Search Bar -->
        <div class="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-3">
            <div class="relative">
                <input type="text" id="searchInput" placeholder="Search RAID items..." class="w-full pl-10 pr-4 py-2 text-base border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-primary focus:border-transparent">
                <span class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400">üîç</span>
            </div>
        </div>

        <!-- Tab Navigation -->
        <nav class="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700">
            <div class="flex overflow-x-auto hide-scrollbar">
                <button class="tab-btn px-6 py-3 text-sm font-medium text-primary border-b-2 border-primary bg-primary/5" data-tab="raid">
                    RAID List
                </button>
                <button class="tab-btn px-6 py-3 text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300" data-tab="matrix">
                    Risk Matrix
                </button>
                <button class="tab-btn px-6 py-3 text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300" data-tab="timeline">
                    Timeline
                </button>
                <button class="tab-btn px-6 py-3 text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300" data-tab="analytics">
                    Analytics
                </button>
                <button class="tab-btn px-6 py-3 text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300" data-tab="settings">
                    Settings
                </button>
            </div>
        </nav>

        <!-- Filter Chips -->
        <div class="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-3">
            <div class="flex space-x-2 overflow-x-auto hide-scrollbar" id="filterChips">
                <button class="filter-chip px-3 py-1 rounded-full text-sm font-medium bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors" data-filter="all">
                    All
                </button>
                <button class="filter-chip px-3 py-1 rounded-full text-sm font-medium bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors" data-filter="risk">
                    Risks
                </button>
                <button class="filter-chip px-3 py-1 rounded-full text-sm font-medium bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors" data-filter="assumption">
                    Assumptions
                </button>
                <button class="filter-chip px-3 py-1 rounded-full text-sm font-medium bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors" data-filter="issue">
                    Issues
                </button>
                <button class="filter-chip px-3 py-1 rounded-full text-sm font-medium bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors" data-filter="dependency">
                    Dependencies
                </button>
                <button class="filter-chip px-3 py-1 rounded-full text-sm font-medium bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors" data-filter="P0">
                    P0
                </button>
                <button class="filter-chip px-3 py-1 rounded-full text-sm font-medium bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors" data-filter="P1">
                    P1
                </button>
                <button class="filter-chip px-3 py-1 rounded-full text-sm font-medium bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors" data-filter="open">
                    Open
                </button>
            </div>
        </div>

        <!-- Main Content Area -->
        <main class="flex-1 overflow-hidden relative">
            <!-- RAID List View -->
            <div id="raidView" class="h-full overflow-y-auto">
                <!-- AI Analysis Button -->
                <div class="p-4 border-b border-gray-200 dark:border-gray-700">
                    <button id="runAIAnalysisBtn" class="w-full bg-gradient-to-r from-primary to-purple-600 text-white py-3 px-4 rounded-lg font-medium hover:from-primary/90 hover:to-purple-600/90 transition-all duration-200 flex items-center justify-center shadow-md">
                        <span class="mr-2">‚ö°</span>
                        Run AI Analysis on All Items
                        <span class="ml-2 text-xs bg-white/20 px-2 py-1 rounded" id="aiAnalysisModelBadge">gpt-4o</span>
                    </button>
                </div>
                <div id="raidList" class="p-4 space-y-3"></div>
            </div>

            <!-- Risk Matrix View -->
            <div id="matrixView" class="h-full overflow-y-auto hidden">
                <div class="p-4">
                    <div class="mb-6">
                        <h2 class="text-xl font-bold text-gray-900 dark:text-white mb-2">Risk Impact/Probability Matrix</h2>
                        <div class="flex items-center space-x-6 text-sm text-gray-600 dark:text-gray-400">
                            <div>Total Items: <span id="matrixTotal" class="font-medium">4</span></div>
                            <div>High Risk: <span id="matrixHighRisk" class="font-medium text-red-600 dark:text-red-400">2</span></div>
                        </div>
                    </div>

                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-600">
                        <div class="grid grid-cols-4 gap-2">
                            <!-- Headers -->
                            <div></div>
                            <div class="text-center text-sm font-medium text-gray-700 dark:text-gray-300 py-2">Low</div>
                            <div class="text-center text-sm font-medium text-gray-700 dark:text-gray-300 py-2">Medium</div>
                            <div class="text-center text-sm font-medium text-gray-700 dark:text-gray-300 py-2">High</div>

                            <!-- High Probability Row -->
                            <div class="text-right text-sm font-medium text-gray-700 dark:text-gray-300 py-2">High</div>
                            <div class="matrix-cell bg-yellow-100 dark:bg-yellow-900/30 border border-yellow-300 dark:border-yellow-700 rounded p-4 text-center cursor-pointer hover:bg-yellow-200 dark:hover:bg-yellow-900/50 transition-colors" data-impact="low" data-probability="high">
                                <div class="matrix-count text-2xl font-bold text-yellow-800 dark:text-yellow-200">0</div>
                            </div>
                            <div class="matrix-cell bg-orange-100 dark:bg-orange-900/30 border border-orange-300 dark:border-orange-700 rounded p-4 text-center cursor-pointer hover:bg-orange-200 dark:hover:bg-orange-900/50 transition-colors" data-impact="medium" data-probability="high">
                                <div class="matrix-count text-2xl font-bold text-orange-800 dark:text-orange-200">1</div>
                            </div>
                            <div class="matrix-cell bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded p-4 text-center cursor-pointer hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors" data-impact="high" data-probability="high">
                                <div class="matrix-count text-2xl font-bold text-red-800 dark:text-red-200">1</div>
                            </div>

                            <!-- Medium Probability Row -->
                            <div class="text-right text-sm font-medium text-gray-700 dark:text-gray-300 py-2">Medium</div>
                            <div class="matrix-cell bg-green-100 dark:bg-green-900/30 border border-green-300 dark:border-green-700 rounded p-4 text-center cursor-pointer hover:bg-green-200 dark:hover:bg-green-900/50 transition-colors" data-impact="low" data-probability="medium">
                                <div class="matrix-count text-2xl font-bold text-green-800 dark:text-green-200">0</div>
                            </div>
                            <div class="matrix-cell bg-yellow-100 dark:bg-yellow-900/30 border border-yellow-300 dark:border-yellow-700 rounded p-4 text-center cursor-pointer hover:bg-yellow-200 dark:hover:bg-yellow-900/50 transition-colors" data-impact="medium" data-probability="medium">
                                <div class="matrix-count text-2xl font-bold text-yellow-800 dark:text-yellow-200">2</div>
                            </div>
                            <div class="matrix-cell bg-orange-100 dark:bg-orange-900/30 border border-orange-300 dark:border-orange-700 rounded p-4 text-center cursor-pointer hover:bg-orange-200 dark:hover:bg-orange-900/50 transition-colors" data-impact="high" data-probability="medium">
                                <div class="matrix-count text-2xl font-bold text-orange-800 dark:text-orange-200">0</div>
                            </div>

                            <!-- Low Probability Row -->
                            <div class="text-right text-sm font-medium text-gray-700 dark:text-gray-300 py-2">Low</div>
                            <div class="matrix-cell bg-green-100 dark:bg-green-900/30 border border-green-300 dark:border-green-700 rounded p-4 text-center cursor-pointer hover:bg-green-200 dark:hover:bg-green-900/50 transition-colors" data-impact="low" data-probability="low">
                                <div class="matrix-count text-2xl font-bold text-green-800 dark:text-green-200">0</div>
                            </div>
                            <div class="matrix-cell bg-green-100 dark:bg-green-900/30 border border-green-300 dark:border-green-700 rounded p-4 text-center cursor-pointer hover:bg-green-200 dark:hover:bg-green-900/50 transition-colors" data-impact="medium" data-probability="low">
                                <div class="matrix-count text-2xl font-bold text-green-800 dark:text-green-200">1</div>
                            </div>
                            <div class="matrix-cell bg-yellow-100 dark:bg-yellow-900/30 border border-yellow-300 dark:border-yellow-700 rounded p-4 text-center cursor-pointer hover:bg-yellow-200 dark:hover:bg-yellow-900/50 transition-colors" data-impact="high" data-probability="low">
                                <div class="matrix-count text-2xl font-bold text-yellow-800 dark:text-yellow-200">0</div>
                            </div>
                        </div>

                        <div class="mt-6 text-center">
                            <div class="text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-1">Impact ‚Üí</div>
                            <div class="text-xs text-gray-500 dark:text-gray-400">Probability ‚Üë</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Timeline View -->
            <div id="timelineView" class="h-full overflow-y-auto hidden">
                <div class="p-4">
                    <h2 class="text-xl font-bold text-gray-900 dark:text-white mb-6">RAID Timeline</h2>
                    <div id="timelineContent" class="space-y-4"></div>
                </div>
            </div>

            <!-- Analytics View -->
            <div id="analyticsView" class="h-full overflow-y-auto hidden">
                <div class="p-4 space-y-6">
                    <h2 class="text-xl font-bold text-gray-900 dark:text-white">Analytics Dashboard</h2>
                    
                    <!-- Executive Summary Button -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-600">
                        <div class="flex items-center justify-between mb-4">
                            <div>
                                <h3 class="text-lg font-semibold text-gray-900 dark:text-white">AI Executive Summary</h3>
                                <p class="text-sm text-gray-600 dark:text-gray-400">Get comprehensive insights on your RAID items</p>
                            </div>
                            <div class="text-right">
                                <div class="text-xs text-gray-500 dark:text-gray-400">Using AI Model</div>
                                <div class="text-sm font-medium text-primary" id="summaryAIModel">Claude-Sonnet-4</div>
                            </div>
                        </div>
                        
                        <button id="generateSummaryBtn" class="w-full bg-primary text-white py-3 rounded-lg font-medium hover:bg-primary/90 transition-colors flex items-center justify-center">
                            <span class="mr-2">‚ö°</span>
                            Generate AI Executive Summary
                        </button>
                    </div>

                    <!-- Quick Stats -->
                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-600">
                            <div class="text-2xl font-bold text-gray-900 dark:text-white" id="totalItemsStat">4</div>
                            <div class="text-sm text-gray-600 dark:text-gray-400">Total Items</div>
                        </div>
                        <div class="bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-600">
                            <div class="text-2xl font-bold text-red-600 dark:text-red-400" id="highPriorityStat">2</div>
                            <div class="text-sm text-gray-600 dark:text-gray-400">P0/P1 Items</div>
                        </div>
                    </div>

                    <!-- Distribution Charts -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-600">
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">Type Distribution</h3>
                        <div id="typeDistribution" class="space-y-3"></div>
                    </div>
                </div>
            </div>

            <!-- Settings View -->
            <div id="settingsView" class="h-full overflow-y-auto hidden">
                <div class="p-4 space-y-6">
                    <h2 class="text-xl font-bold text-gray-900 dark:text-white">Settings</h2>
                    
                    <!-- AI Configuration -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-600">
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">AI Configuration</h3>
                        
                        <div class="space-y-4">
                            <!-- AI Provider Selection -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">AI Provider</label>
                                <select id="aiProviderSelect" class="w-full px-3 py-2 text-base border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-transparent">
                                    <option value="OpenAI">OpenAI</option>
                                    <option value="Anthropic">Anthropic</option>
                                    <option value="Gemini">Google Gemini</option>
                                </select>
                            </div>

                            <!-- AI Model Selection -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">AI Model</label>
                                <select id="aiModelSelect" class="w-full px-3 py-2 text-base border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-transparent">
                                    <option value="gpt-4o">GPT-4o (Recommended)</option>
                                    <option value="gpt-4o-mini">GPT-4o-mini (Cost Effective)</option>
                                </select>
                            </div>

                            <!-- API Key Configuration -->
                            <div id="apiKeySection">
                                <div class="mb-2">
                                    <label class="text-sm font-medium text-gray-700 dark:text-gray-300">API Key (Required)</label>
                                    <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Enter your AI provider's API key to enable AI features</p>
                                </div>
                                <div id="apiKeyInput">
                                    <input type="password" id="apiKeyField" placeholder="Enter your API key..." class="w-full px-3 py-2 text-base border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-transparent mb-2">
                                    <p class="text-xs text-gray-500 dark:text-gray-400">API keys are stored locally and never sent to our servers</p>
                                </div>
                            </div>

                            <!-- Auto Apply -->
                            <div class="flex items-center justify-between">
                                <div>
                                    <label class="text-sm font-medium text-gray-700 dark:text-gray-300">Auto-apply AI suggestions</label>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">When confidence is high</p>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" id="autoApplyToggle" class="sr-only peer">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 dark:peer-focus:ring-primary/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"></div>
                                </label>
                            </div>

                            <!-- Confidence Threshold -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Confidence Threshold</label>
                                <input type="range" id="confidenceSlider" min="0" max="1" step="0.1" value="0.8" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700">
                                <div class="flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1">
                                    <span>0%</span>
                                    <span id="confidenceValue">80%</span>
                                    <span>100%</span>
                                </div>
                            </div>

                            <!-- Usage Stats -->
                            <div class="pt-4 border-t border-gray-200 dark:border-gray-700">
                                <h4 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Usage Statistics</h4>
                                <div class="text-xs text-gray-500 dark:text-gray-400 space-y-1">
                                    <div>Total AI Calls: <span id="totalCalls">0</span></div>
                                    <div>API Calls: <span id="apiCalls">0</span></div>
                                    <div>Last Reset: <span id="lastReset">Never</span></div>
                                </div>
                                <button id="resetStats" class="mt-2 text-xs text-primary hover:text-primary/80">Reset Statistics</button>
                            </div>
                        </div>
                    </div>

                    <!-- Data Management -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-600">
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">Data Management</h3>
                        
                        <div class="space-y-3">
                            <button id="clearAllData" class="w-full px-4 py-2 bg-red-500 text-white rounded-lg font-medium hover:bg-red-600 transition-colors">
                                Clear All Data
                            </button>
                            <button id="resetToDefaults" class="w-full px-4 py-2 bg-gray-500 text-white rounded-lg font-medium hover:bg-gray-600 transition-colors">
                                Reset to Defaults
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Floating Action Button -->
        <button id="fab" class="fixed bottom-6 right-6 w-14 h-14 bg-primary text-white rounded-full shadow-lg hover:bg-primary/90 transition-all duration-200 flex items-center justify-center z-30">
            <span class="text-2xl">+</span>
        </button>
    </div>



    <script src="/offline-handler.js"></script>
    <script src="/sync-manager.js"></script>
    <script src="/raid-sync-integration.js"></script>
</body></html>